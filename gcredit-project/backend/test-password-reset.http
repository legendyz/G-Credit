### Password Reset Test Suite
### Test password reset flow: request reset → receive token → reset password

@baseUrl = http://localhost:3000

### Test 1: Request password reset for existing user
POST {{baseUrl}}/auth/request-reset
Content-Type: application/json

{
  "email": "employee.test@gcredit.com"
}

### Test 2: Request password reset for non-existent user (should still return 200)
POST {{baseUrl}}/auth/request-reset
Content-Type: application/json

{
  "email": "nonexistent@gcredit.com"
}

### Test 3: Request password reset with invalid email format
POST {{baseUrl}}/auth/request-reset
Content-Type: application/json

{
  "email": "invalid-email"
}

### Test 4: Reset password with valid token
# Note: Get token from console output after Test 1
POST {{baseUrl}}/auth/reset-password
Content-Type: application/json

{
  "token": "PASTE_TOKEN_HERE",
  "newPassword": "NewSecurePass123!"
}

### Test 5: Try to reuse same token (should fail)
POST {{baseUrl}}/auth/reset-password
Content-Type: application/json

{
  "token": "PASTE_TOKEN_HERE",
  "newPassword": "AnotherPass123!"
}

### Test 6: Reset password with invalid token
POST {{baseUrl}}/auth/reset-password
Content-Type: application/json

{
  "token": "invalid-token-12345",
  "newPassword": "NewPass123!"
}

### Test 7: Reset password with weak password
POST {{baseUrl}}/auth/reset-password
Content-Type: application/json

{
  "token": "PASTE_TOKEN_HERE",
  "newPassword": "weak"
}

### Test 8: Login with old password (should fail)
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "employee.test@gcredit.com",
  "password": "EmployeePass123!"
}

### Test 9: Login with new password (should succeed)
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "employee.test@gcredit.com",
  "password": "NewSecurePass123!"
}
