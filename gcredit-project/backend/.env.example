# Database - Azure PostgreSQL
DATABASE_URL="postgresql://username:password@your-server.postgres.database.azure.com:5432/postgres?sslmode=require"

# JWT Configuration
JWT_SECRET="your-secret-key-change-this"
JWT_EXPIRES_IN="7d"
# Access token expiry. Default: 15m. UAT: change to "4h" for extended testing sessions.
JWT_ACCESS_EXPIRES_IN="15m"
# Refresh token expiry. Default: 7d.
JWT_REFRESH_EXPIRES_IN="7d"

# Server Configuration
PORT=3000
NODE_ENV="development"

# Azure Blob Storage
AZURE_STORAGE_CONNECTION_STRING="DefaultEndpointsProtocol=https;AccountName=xxx;AccountKey=xxx;EndpointSuffix=core.windows.net"
AZURE_STORAGE_ACCOUNT_NAME="your-storage-account-name"
AZURE_STORAGE_CONTAINER_BADGES="badges"
AZURE_STORAGE_CONTAINER_EVIDENCE="evidence"

# Microsoft Graph API (Story 7.1)
# Azure AD App credentials for Client Credentials flow
AZURE_TENANT_ID="your-tenant-id"
AZURE_CLIENT_ID="your-client-id"
AZURE_CLIENT_SECRET="your-client-secret"
AZURE_TENANT_DOMAIN="your-tenant-domain.onmicrosoft.com"

# Microsoft Graph API configuration
GRAPH_API_SCOPE="https://graph.microsoft.com/.default"
GRAPH_API_BASE_URL="https://graph.microsoft.com/v1.0"
ENABLE_GRAPH_EMAIL="true"
GRAPH_EMAIL_FROM="badges@your-tenant-domain.onmicrosoft.com"

# Story 12.3b: Security Group Role Mapping
# Azure AD Security Group Object IDs for G-Credit role mapping
# Get from: Azure Portal → Azure AD → Groups → select group → Overview → Object Id
AZURE_ADMIN_GROUP_ID="your-g-credit-admins-group-object-id"
AZURE_ISSUER_GROUP_ID="your-g-credit-issuers-group-object-id"

# Story 12.3a: Manual User Creation (admin-users only — M365 users are SSO-only per DEC-011-13)
DEFAULT_USER_PASSWORD="password123"

# Azure AD SSO (Sprint 13 - Authorization Code Flow)
AZURE_SSO_CLIENT_ID="your-client-id"
AZURE_SSO_CLIENT_SECRET="your-client-secret"
AZURE_SSO_REDIRECT_URI="http://localhost:3000/api/auth/sso/callback"
AZURE_SSO_SCOPES="openid profile email User.Read"

# JIT Admin Bootstrap (Story 13.2)
INITIAL_ADMIN_EMAIL=""

# Microsoft Teams Notifications (Story 7.4)
# Enable/disable Teams notifications
ENABLE_TEAMS_NOTIFICATIONS="true"

# Default Teams channel for badge notifications
# Get Team ID: https://docs.microsoft.com/en-us/graph/api/team-get
# Get Channel ID: https://docs.microsoft.com/en-us/graph/api/channel-get
DEFAULT_TEAMS_TEAM_ID="your-team-id"
DEFAULT_TEAMS_CHANNEL_ID="your-channel-id"

# Rate Limiting — Per-endpoint @Throttle() override (Story 15.13, TD-038)
# When set, overrides ALL @Throttle() decorator values (auth, bulk-issuance, etc.)
# When NOT set, per-endpoint production defaults apply (Story 8.6)
# THROTTLE_TTL_SECONDS: Override TTL window in seconds (converted to ms internally)
# THROTTLE_LIMIT: Override max requests per TTL window (minimum floor: 5)
# THROTTLE_TTL_SECONDS=60
# THROTTLE_LIMIT=5

# Platform URL (for links in notifications)
PLATFORM_URL="http://localhost:5173"
FRONTEND_URL="http://localhost:5173"
