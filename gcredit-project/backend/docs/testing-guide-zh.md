# ğŸš€ Story 2.5 æµ‹è¯•å¿«é€ŸæŒ‡å—

## âœ… å®ç°å®Œæˆ
æ‰€æœ‰å¯†ç é‡ç½®åŠŸèƒ½å·²å®ç°å®Œæˆï¼

## ğŸ“‹ ä½¿ç”¨ VS Code REST Client æ‰©å±•æµ‹è¯•ï¼ˆæ¨èï¼‰

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨åç«¯ï¼ˆåœ¨ç‹¬ç«‹ç»ˆç«¯çª—å£ï¼‰

**åœ¨ VS Code å¤–éƒ¨**æ‰“å¼€ä¸€ä¸ªæ–°çš„ PowerShell çª—å£ï¼š
```powershell
cd c:\G_Credit\CODE\gcredit-project\backend
npm run start:dev
```

ç­‰å¾…çœ‹åˆ° `Nest application successfully started` æ¶ˆæ¯ã€‚**ä¿æŒè¿™ä¸ªçª—å£æ‰“å¼€ï¼**

### ç¬¬äºŒæ­¥ï¼šä½¿ç”¨ REST Client æµ‹è¯•

1. åœ¨ VS Code ä¸­æ‰“å¼€æ–‡ä»¶ï¼š`test-password-reset.http`

2. **æµ‹è¯• 1 - è¯·æ±‚å¯†ç é‡ç½®**ï¼š
   - æ‰¾åˆ° `### Test 1: Request password reset for existing user`
   - ç‚¹å‡»ä¸Šæ–¹çš„ `Send Request`
   - é¢„æœŸï¼š200 OKï¼Œè¿”å›æˆåŠŸæ¶ˆæ¯

3. **æŸ¥çœ‹åç«¯æ§åˆ¶å°è¾“å‡º**ï¼š
   - å›åˆ°è¿è¡Œåç«¯çš„ PowerShell çª—å£
   - æŸ¥æ‰¾ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š
   ```
   ================================================================================
   ğŸ“§ [DEV MODE] Password Reset Email (not sent)
   ================================================================================
   To: employee.test@gcredit.com
   Subject: Reset Your Password
   Reset URL: http://localhost:5173/reset-password?token=abc123def456...
   Token: abc123def456...
   ================================================================================
   ```
   - **å¤åˆ¶ Token** å€¼ï¼ˆä¸€ä¸ª64å­—ç¬¦çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼‰

4. **æµ‹è¯• 4 - ä½¿ç”¨ Token é‡ç½®å¯†ç **ï¼š
   - åœ¨ `test-password-reset.http` æ–‡ä»¶ä¸­æ‰¾åˆ° `### Test 4: Reset password with valid token`
   - å°† `PASTE_TOKEN_HERE` æ›¿æ¢ä¸ºä½ åˆšæ‰å¤åˆ¶çš„ token
   - ç‚¹å‡» `Send Request`
   - é¢„æœŸï¼š200 OKï¼Œå¯†ç å·²é‡ç½®

5. **æµ‹è¯• 5 - å°è¯•é‡ç”¨ Token**ï¼š
   - æ‰¾åˆ° `### Test 5: Try to reuse same token`
   - ç¡®ä¿ä½¿ç”¨ç›¸åŒçš„ token
   - ç‚¹å‡» `Send Request`
   - é¢„æœŸï¼š400 Bad Requestï¼ˆtoken å·²ä½¿ç”¨ï¼‰

6. **æµ‹è¯• 9 - ä½¿ç”¨æ–°å¯†ç ç™»å½•**ï¼š
   - æ‰¾åˆ° `### Test 9: Login with new password`
   - ç‚¹å‡» `Send Request`
   - é¢„æœŸï¼š200 OKï¼Œè¿”å› JWT token

## ğŸ¯ å…¨éƒ¨æµ‹è¯•åœºæ™¯

| æµ‹è¯• | ç«¯ç‚¹ | é¢„æœŸçŠ¶æ€ | è¯´æ˜ |
|-----|------|---------|-----|
| 1 | POST /auth/request-reset | 200 | è¯·æ±‚å¯†ç é‡ç½®ï¼ˆå­˜åœ¨çš„ç”¨æˆ·ï¼‰ |
| 2 | POST /auth/request-reset | 200 | è¯·æ±‚å¯†ç é‡ç½®ï¼ˆä¸å­˜åœ¨çš„ç”¨æˆ·ï¼Œè¿”å›ç›¸åŒæ¶ˆæ¯ï¼‰ |
| 3 | POST /auth/request-reset | 400 | æ— æ•ˆçš„é‚®ç®±æ ¼å¼ |
| 4 | POST /auth/reset-password | 200 | ä½¿ç”¨æœ‰æ•ˆ token é‡ç½®å¯†ç  |
| 5 | POST /auth/reset-password | 400 | å°è¯•é‡ç”¨å·²ä½¿ç”¨çš„ token |
| 6 | POST /auth/reset-password | 400 | ä½¿ç”¨æ— æ•ˆ token |
| 7 | POST /auth/reset-password | 400 | ä½¿ç”¨å¼±å¯†ç  |
| 8 | POST /auth/login | 401 | ä½¿ç”¨æ—§å¯†ç ç™»å½•ï¼ˆåº”å¤±è´¥ï¼‰ |
| 9 | POST /auth/login | 200 | ä½¿ç”¨æ–°å¯†ç ç™»å½•ï¼ˆåº”æˆåŠŸï¼‰ |

## âœ¨ å·²å®ç°çš„å®‰å…¨åŠŸèƒ½

- âœ… **é€šç”¨å“åº”æ¶ˆæ¯**ï¼šä¸é€éœ²é‚®ç®±æ˜¯å¦å­˜åœ¨äºç³»ç»Ÿä¸­
- âœ… **ä¸€æ¬¡æ€§ Token**ï¼šé‡ç½®å token è¢«æ ‡è®°ä¸ºå·²ä½¿ç”¨
- âœ… **Token è¿‡æœŸ**ï¼š1å°æ—¶åè‡ªåŠ¨å¤±æ•ˆ
- âœ… **å¯†ç å¼ºåº¦éªŒè¯**ï¼šé‡ç½®æ—¶ä¹Ÿè¦æ±‚å¼ºå¯†ç 
- âœ… **å®¡è®¡æ—¥å¿—**ï¼šè®°å½•æ‰€æœ‰å¯†ç é‡ç½®æ“ä½œ

## ğŸ”§ æ•…éšœæ’é™¤

### åç«¯æ— æ³•è¿æ¥
```powershell
# æ£€æŸ¥ç«¯å£æ˜¯å¦æ­£åœ¨ç›‘å¬
Test-NetConnection -ComputerName localhost -Port 3000

# å¦‚æœå¤±è´¥ï¼Œåœ¨ VS Code å¤–éƒ¨çš„ç‹¬ç«‹ PowerShell çª—å£é‡å¯åç«¯
cd c:\G_Credit\CODE\gcredit-project\backend
npm run start:dev
```

### æ²¡æœ‰çœ‹åˆ°é‚®ä»¶è¾“å‡º
- ç¡®è®¤ NODE_ENV ä¸æ˜¯ 'production'
- é‚®ä»¶å†…å®¹ä¼šè¾“å‡ºåˆ°**è¿è¡Œ npm run start:dev çš„ç»ˆç«¯çª—å£**ï¼Œä¸æ˜¯ VS Code çš„ç»ˆç«¯

## ğŸ“ æµ‹è¯•å®Œæˆå

ä¸€æ—¦æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼š
1. æäº¤ä»£ç åˆ° Git
2. æ¨é€åˆ° sprint-1-authentication åˆ†æ”¯
3. æ›´æ–° sprint backlog
4. å‡†å¤‡ä¸‹ä¸€ä¸ª Story æˆ–æ€»ç»“ Sprint 1

---
**é‡è¦æç¤º**ï¼šåç«¯å¿…é¡»åœ¨ **VS Code å¤–éƒ¨çš„ç‹¬ç«‹ PowerShell çª—å£** ä¸­è¿è¡Œï¼Œè¿™æ ·å¯ä»¥é¿å… VS Code ç»ˆç«¯çš„ä½œä¸šå†²çªé—®é¢˜ã€‚
